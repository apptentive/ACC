<!DOCTYPE html>
<html ng-app="accApp">
<head>
  <title>Projects list</title>
  <link rel="stylesheet" type="text/css" href="/style.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.min.js"></script>
  <script>
    var accApp = angular.module('accApp', []);
    accApp.controller('ProjectListCtrl', function ($scope, $http) {
      $http.get('/projects').
        then(function(response) {
          $scope.projects = response.data
        })
    });
   accApp.controller('GridCtrl', function ($scope, $http) {
      $http.get('/projects/0001').
        then(function(response) {
          $scope.project = response.data
        })
    });
  </script>
</head>
<body>
  <div class="sidebar" ng-controller="ProjectListCtrl">
    <h2>Project list</h2>
    <table class="list">
      <tr ng-repeat="project in projects">
        <th>{{project.title}}</th>
        <td>Delete</td>
      </tr>
      <tr>
        <th colspan="2">Add</th>
      </tr>
    </table>
  </div>
  <div class="project" ng-controller="GridCtrl">
    <h1>{{project.title}}</h1>
    <table class="grid" id="proj">
      <script>
        var grid = "<tr><th>&nbsp</th>"
        grid += "<th ng-repeat=\"attribute in project.attributes\">{{attribute.name}}</th></tr>"
        grid += "<tr ng-repeat=\"component in project.components\"><th>{{component.name}}</th><th ng-repeat=\"attribute in project.attributes\">&nbsp</th></tr>"
        document.getElementById("proj").innerHTML = grid;
      </script>
    </table>
  </div>
</body>
</html>
