<!DOCTYPE html>
<html ng-app="accApp" ng-controller="appController">
  <head>
    <title>Projects list</title>
    <link rel="stylesheet" type="text/css" href="/style.css">
    <script type="text/javascript" src="./bundle.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular-animate.js"></script>
  </head>

  <body ng-controller="ProjectsListController">
    <!-- Project List Sidebar -->
    <div sidebar></div>

    <div ng-controller="CapabilitiesController">
      <!-- Project View -->
      <div class="project" ng-init="openProject(1); getAttributes(1); getComponents(1)">
        <h1>{{project.name}}</h1>
        <!-- Main Project Table -->
        <div project-table></div>

        <!-- Edit Attributes/Compnents View  -->
        <div>
          <h4><a href="" ng-click="edit_table=true" ng-hide="edit_table">Edit Table</a></h4>
          <div class="attr_comp_list" ng-show="edit_table" col="2">

            <!-- Edit Attribures Table -->
            <table ng-controller="AttributesController" id="edit_attributes">
              <tr>
                <th><h3>Attributes:</h3></th>
              </tr>
              <tr ng-repeat="attribute in attributesList">
                <td>{{attribute.name}}</td>
                <td><a href="" ng-click="deleteAttribute(attribute.id)">Remove</a></td>
              </tr>
              <th colspan="2"><a href="" ng-click="addAttr=true" ng-hide="addAttr">Add</a></th>
              <tr ng-show="addAttr">
                <form ng-submit="addAttribute(project.id)">
                  <td colspan="2">
                    New Attribute Name:<br>
                    <input ng-model="newAttribute" type="text"><br>
                    <input type="submit" value="Add Attribute" ng-click="addAttr=true"><br>
                    <button ng-click="addAttr=false">Cancel</button>
                </form>
              </tr>
            </table>

            <!-- Edit Components Table -->
            <table ng-controller="ComponentsController" id="edit_components">
              <tr>
                <th><h3>Components:</h3></th>
              </tr>
              <tr ng-repeat="component in componentsList">
                <td>{{component.name}}</td>
                <td><a href="" ng-click="deleteComponent(component.id)">Remove</a></td>
              </tr>
              <th colspan="2"><a href="" ng-click="addComp=true" ng-hide="addComp">Add</a></th>
              <tr ng-show="addComp">
                <form ng-submit="addComponent(project.id)">
                  <td colspan="2">
                    New Component Name:<br>
                    <input ng-model="newComponent" type="text"><br>
                    <input type="submit" value="Add Component" ng-click="addComp=true"><br>
                    <button ng-click="addComp=false">Cancel</button>
                </form>
              </tr>
            </table><br>
            <button ng-click="edit_table=false" ng-show="edit_table">Close</button>
          </div>
        </div>

        <!-- Edit Capabilities Table -->
        <div capabilities-dir></div>

      </div>
    </div>
  </body>
</html>
